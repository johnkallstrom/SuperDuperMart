@page "/products"
@attribute [Authorize(Roles = Roles.Member)]

<PageTitle>SuperDuperMart - Products</PageTitle>

@if (_loading)
{
    <Spinner />
}
else
{
    @if (Model != null)
    {
        <div class="d-flex flex-row mb-3">
            <div class="me-auto">
                <label class="form-label">Sort By</label>
                <select class="form-select" value="@SortBy" @onchange="HandleSortChange">
                    <option value="Created">Latest</option>
                    <option value="Name">Name (A-Z)</option>
                    <option value="Name">Name (Z-A)</option>
                    <option value="Price">Price High</option>
                    <option value="Price">Price Low</option>
                </select>
            </div>
        </div>
        <div class="row row-cols-4 gy-4">
            @foreach (var product in Model.Data)
            {
                <div class="col">
                    <ProductCard Product="product" />
                </div>
            }
        </div>
        <div class="row mt-3">
            <div class="col">
                <Pagination PageNumber="Model.PageNumber"
                            TotalPages="Model.TotalPages"
                            Position="Position.Center"
                            OnPreviousClick="HandlePreviousClick"
                            OnNextClick="HandleNextClick" />
            </div>
        </div>
    }
}